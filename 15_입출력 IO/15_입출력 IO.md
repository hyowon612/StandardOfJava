# 1. 자바에서의 입출력

## 1.1 입출력이란?

`I/O` - input과 output의 약자

컴퓨터 내부 또는 외부의 장치와 프로그램간의 데이터를 주고받는 것

## 1.2 스트림

스트림 - 데이터를 운반하는데 사용되는 연결통로

자바에서 입출력을 수행하려면, 두 대상을 연결하고 데이터를 전송할 수 있는 `스트림` 이 필요함

- 단방향통신만 가능
- 하나의 스트림으로 입력과 출력을 동시에 처리할 수 없음
  - 입력과 출력을 동시에 수행하려면 입력을 위한 입력스트림과 출력을 위한 출력스트림, 모두 2개의 스트림이 필요

## 1.3 바이트기반 스트림

스트림은 바이트 단위로 데이터를 전송

입출력의 단위가 1byte

## 1.4 보조 스트림

스트림의 기능을 보완하기 위한 스트림

데이터를 입출력할 수 없음

스트림의 기능을 향상시키거나 사로운 기능 추가 가능

스트림을 먼저 생성한 다음에 이를 이용해서 보조스트림을 생성해야 함

## 1.5 문자기반 스트림

Java에서는 한 문자를 의미하는 char형이 2byte이기 때문에 문자기반 스트림 제공

문자데이터를 입출력할 때는 바이트기반 스트림 대신 문자기반 스트림 사용

# 2. 바이트기반 스트림

## 2.1 InputStream과 OutputStream

모든 바이트기반의 스트림의 조상

프로그램이 종료될 때, 사용하고 닫지 않은 스트림을 JVM이 자동적으로 닫아주기는 하지만, 스트림을 사용해서 모든 작엄을 마치고 난 후에는 `close()` 를 호출해서 반드시 닫아줘야 함

## 2.2 ByteArrayInputStream과 ByteArrayOutputStream

메모리, 즉 바이트배열에 데이터를 입출력하는데 사용되는 스트림

주로 다른 곳에 입출력하기 전에 데이터를 임시로 바이트배열에 담아서 변환등의 작업을 하는데 사용

## 2.3 FileInputStream과 FileOutputStream

파일에 입출력을 하기 위한 스트림

# 3. 바이트기반의 보조스트림

## 3.1 FilterInputStream과 FilterOutputStream

모든 보조스트림의 조상

보조스트림은 자체적으로 입출력을 수행할 수 없기 때문에 기반스트림을 필요로 함

상속을 통해 원하는 작업을 수행하도록 읽고 쓴느 메서드를 오버라이딩해야 함

## 3.2 BufferedInputStream과 BurfferedOutputStream

스트림의 입출력 효율을 높이기 위해 버퍼를 사용하는 보조스트림

한 바이트씩 입출력하는 것보다는 버퍼를 이용해서 한 번에 여러 바이트를 입출력하는 것이 빠르기 때문에 대부분의 입출력 작업에 사용됨

## 3.3 DataInputStream과 DataOutputStream

데이터를 읽고 쓰는데 있어서 byte단위가 아닌, 8가지 기본 자료형의 단위로 읽고 쓸 수 있다는 장점이 있음

## 3.4 SequenceInputStream

여러 개의 입력스트림을 연속적으로 연결해서 하나의 스트림으로부터 데이터를 읽는 것과 같이 처리할 수 있도록 도와줌

큰 파일을 여러 개의 작은 파일로 나누었다가 하나의 파일로 합치는 것과 같은 작업ㅇ르 수행할 때 사용하면 좋음

## 3.5 PrintStream

데이터를 기반스트림에 다양한 형태로 출력할 수 있는 `print` , `println` , `printf` 와 같은 메서드를 오버로딩하여 제공

# 4. 문자기반 스트림

## 4.1 Reader와 Writer

byte배열 대신 char배열을 사용한다는 것 외에는 InputStream/OutputStream의 메서드와 같음

Reader/Writer과 그 자손들은 여러 종류의 인코딩과 자바에서 사용하는 유니코드(UTF-16)간의 변환을 자동적으로 처리해줌

Reader는 특정 인코딩을 읽어서 유니코드로 변환하고 Writer는 유니코드를 특정 인코딩으로 변환하여 저장

## 4.2 FileReader와 FileWriter

파일로부터 텍스트데이터를 읽고, 파일에 쓰는데 사용

FileInputStream/FileOutputStream과 사용법 같음

## 4.3 PipedReader와 PiperWriter

쓰레드 간에 데이터를 주고받을 때 사용됨

다른 스트림과 달리 입력과 출력스트림을 하나의 스트림으로 연결해서 데이터를 주고받는다는 특징이 있음

## 4.4 StringReader와 StringWriter

입출력 대상이 메모리인 스트림

# 5. 문자기반의 보조스트림

## 5.1 BufferedReader와 BufferedWriter

버퍼를 이용해서 입출력의 효율을 높일 수 있도록 해주는 역할을 함

법퍼를 이용하면 입출력의 효율이 좋아짐

## 5.2 InputStreamReader와 OutputStreamWriter

바이트기반 스트림을 문자기반 스트림으로 연결시켜주는 역할을 함

그리고 바이트기반 스트림의 데이터를 지정된 인코디으이 문자데이터로 변환하는 작업 수행

# 6. 표준입출력과 File

## 6.1 표준입출력

표준입출력 - 콘솔을 통한 데이터 입력과 콘솔로의 데이터 출력을 으미ㅣ

자바에서는 표준 입출력을 위해 3가지 입출력 스트림 제공

`System.in` - 콘솔로부터 데이터를 입력받는데 사용

`System.out`  - 콘솔로 데이터를 출력하는데 사용

`System.err` - 콘솔로 데이털들 출력하는데 사용

## 6.2 표준입출력의 대상변경

`setIn()` ,  `setOut()` ,  `setErr()` 를 사용하면 입출력을 콘솔 이외에 다른 입출력 대상으로 변경하는 것이 가능

## 6.3 RandomAccessFile

자바에서는 입력과 출력이 각각 분리되어 별도로 작업을 하도록 설계되어 있는데, 

RandomAccessFile만은 하나의 클래스로 파일에 대한 입력과 출력을 모두 할 수 있도록 되어 있음



가장 큰 장점은 파일의 어느 위치에나 읽기/쓰기가 가능하다는 것

## 6.4 File

자바에서는 File클래스를 통해서 파일과 디렉토리를 다룰 수 있음

File인스턴스는 파일 일 수도 있고 디렉토리일 수도 있음

File인스턴스를 생성했다고 해서 파일이나 디렉토리가 생성되는 것은 아님

파일명이나 디렉토리명으로 지정된 문자열이 유효하지 않더라도 컴파일 에러나 예외를 발생시키지 않음

새로운 파일을 생성하기 위해서는 File인스턴스를 생성한 다음, 출력스트림을 생성하거나 `createNewFile()` 을 호출해야 함

# 7. 직렬화

## 7.1 직렬화란?

직렬화란 객체를 데이터 스트림으로 만드는 것

즉, 객체에 저장된 데이터를 스트림에 쓰기 위해 연속적인 데이터로 변환하는 것

반대로 스트림으로부터 데이터를 읽어서 객체를 만드는 것을 역직렬화라고 함

## 7.2 ObjectInputStream, ObjectOutputStream

직렬화에는 ObjectOutputStream을 사용하고 역직렬화에는 ObjectInputStream을 사용

## 7.3 직렬화가 가능한 클래스 만들기

직렬화가 가능한 클래스를 만드려면 직렬화하고자 하는 클래스가 java.io, Serializable 인터페이스를 구현하도록 하면 된다. 

Serializable 인터페이스는 아무런 내용도 없는 빈 인터페이스이지만, 직렬화를 고려하여 작성한 클래스인지를 판단하는 기준이 된다.

## 7.4 직렬화가능한 클래스의 버전관리

직렬화된 객체를 역직렬화할 때는 직렬화 했을 때와 같은 클래스를 사용해야 함. 

그러나 클래스의 이름이 같더라고 클래스의 내용이 변경된 경우 역직렬화는 실패하며 예외 발생

그러므로 역직렬화 할 때 클래스의 버전을 비교함으로써 직렬화할 때읜 클래스의 버전과 일치하는지 확인 가능
